(function(){"use strict";var e={372:function(e,t,i){var n=i(963),a=i(252),s=i.p+"img/cloudly.a8f6bf2c.png";const o={key:0,class:"weather-widget-wrapper"},l={class:"widget-bg"},r={class:"view-area"},c={key:0,class:"weather"},d={key:1,class:"settings"},u={key:1,class:"weather-widget--closed"},g=(0,a._)("img",{class:"closed__image",src:s,alt:"Иконка облака"},null,-1),p=[g];function m(e,t,i,n,s,g){const m=(0,a.up)("main-btns"),h=(0,a.up)("weather-window"),w=(0,a.up)("settings-window");return(0,a.wg)(),(0,a.iD)(a.HY,null,[e.widgetIsVisible?((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",l,[(0,a.Wm)(m,{viewStatus:e.settingIsVisible,onDisplay:e.widgetDisplay,onUpdate:e.setSettingsVisible},null,8,["viewStatus","onDisplay","onUpdate"]),(0,a._)("div",r,[e.settingIsVisible?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("section",c,[e.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(h,{key:0,model:e.myWeather},null,8,["model"]))])),e.settingIsVisible?((0,a.wg)(),(0,a.iD)("section",d,[(0,a.Wm)(w,{onMove:e.moveItem,onUpdate:e.updateWeatherValue,onDelete:e.deleteCity,cityNameValidation:e.uniquenessValidation,reqValidation:e.reqIsNotValid,model:e.myWeather,loading:e.isLoading},null,8,["onMove","onUpdate","onDelete","cityNameValidation","reqValidation","model","loading"])])):(0,a.kq)("",!0)])])])):(0,a.kq)("",!0),e.widgetIsVisible?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("button",{class:"open-button",onClick:t[0]||(t[0]=(...t)=>e.widgetDisplay&&e.widgetDisplay(...t))},p)]))],64)}const h={key:0,class:"empty-data"},w={class:"weather-list"};function v(e,t,i,n,s,o){const l=(0,a.up)("weather-item");return(0,a.wg)(),(0,a.iD)("div",null,[e.model.length<1?((0,a.wg)(),(0,a.iD)("h3",h,"City not selected. Please select the city")):(0,a.kq)("",!0),(0,a._)("ul",w,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.model,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.name},[(0,a.Wm)(l,{model:e},null,8,["model"])])))),128))])])}var A=i(577);const y=e=>((0,a.dD)("data-v-967577fc"),e=e(),(0,a.Cn)(),e),f={class:"item-wrapper"},b={class:"city-name"},I={class:"main-info"},V={class:"item-image-wrapper"},D=["src"],S={class:"main-info__description"},O=y((()=>(0,a._)("br",null,null,-1))),C={class:"extension-info"};function k(e,t,i,n,s,o){return(0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("h2",b,(0,A.zw)(e.model.name)+", "+(0,A.zw)(e.model.country),1),(0,a._)("div",I,[(0,a._)("div",V,[(0,a._)("img",{src:`https://openweathermap.org/img/wn/${e.model.weather.icon}@2x.png`,alt:"weather"},null,8,D)]),(0,a._)("h3",null,(0,A.zw)(e.model.temp)+"℃",1)]),(0,a._)("h2",S,[(0,a.Uk)((0,A.zw)(e.model.feels)+"℃ ",1),O,(0,a.Uk)(" "+(0,A.zw)(e.model.weather.description),1)]),(0,a._)("ul",C,[(0,a._)("li",null,(0,A.zw)(e.model.humidity),1),(0,a._)("li",null,(0,A.zw)(e.model.wind),1),(0,a._)("li",null,(0,A.zw)(e.model.visibility),1)])])}var M=(0,a.aZ)({props:{model:{required:!0,type:Object}}}),N=i(744);const q=(0,N.Z)(M,[["render",k],["__scopeId","data-v-967577fc"]]);var W=q,Y=(0,a.aZ)({props:{model:{required:!0}},components:{WeatherItem:W}});const Z=(0,N.Z)(Y,[["render",v],["__scopeId","data-v-a1f5ff6c"]]);var F=Z;const K=e=>((0,a.dD)("data-v-08775238"),e=e(),(0,a.Cn)(),e),J={class:"settings-window"},z=K((()=>(0,a._)("h2",{class:"settings-title"},"Settings",-1))),j={key:0,class:"empty-data"},B={class:"weather-list"},E={key:0,class:"alert"},U={key:1,class:"alert"},P={key:2,id:"loading"};function x(e,t,i,s,o,l){const r=(0,a.up)("settings-item"),c=(0,a.up)("settings-input");return(0,a.wg)(),(0,a.iD)("div",J,[(0,a._)("div",null,[z,e.model.length<1?((0,a.wg)(),(0,a.iD)("h3",j," City not selected. Please select the city ")):(0,a.kq)("",!0),(0,a._)("ul",B,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.model,((i,s)=>((0,a.wg)(),(0,a.j4)(r,{key:i.name,draggable:"true",onDragstart:t=>e.dragStart(s,t),onDragover:t[0]||(t[0]=(0,n.iM)((()=>{}),["prevent"])),onDrop:t=>e.dragFinish(s,t),onDelete:e.deleteCity,model:i},null,8,["onDragstart","onDrop","onDelete","model"])))),128))])]),(0,a._)("div",null,[e.reqValidation?((0,a.wg)(),(0,a.iD)("p",E," City is not found, please try again ")):(0,a.kq)("",!0),e.cityNameValidation?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",U," This location has already been added. ")),e.loading?((0,a.wg)(),(0,a.iD)("div",P)):((0,a.wg)(),(0,a.j4)(c,{key:3,onUpdate:e.updateModelValue},null,8,["onUpdate"]))])])}var _="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAbRJREFUOE+l0zvIj2EYBvDf5xCScgqbcph8JoNSTGxiMVEoDGJgsZLNxEAGFIrJQjYmShlMmBzKhpxKQo5deh69/8f799fnWd77fZ77vu7Ddd1j/n5OY3vjchF7h4WNNQ/jWNy5u4ItjU979wwPqk8FzPcMdo2oeNjzOezBjwqYDCsmCFbDHmK8Aq7BnP8EfIs73Rm+w9QJgn7B7MR2AR9hGV5hJmYU8OvY2GN/xAfMx2MsbwFDym7cxhPsLCAL8LLHPo+lWIuzhZSBCjfhKjKLfbhcQGbhfY+9FafK7DfjWlvhQjwP9SXz0wIyDZ977CWlk4xtEV60gJPwrSdwCr6W+67dTTQZ31vA/Ke6nK7zvwD+JrddvTA3vbQc5vLe13ISRxEh71NHEQOkpLL7UTu24WQZeB8pIW4/LpU9Xtnucv0/jgO4gAw9kuiTTaQV0nbgBA4OA1yPG4jIk/1Ip/3E1DZzny4i5g24OQxwLl4XmcTxFlbhbglYjXtYVxJnvvPwZhhgSPhFfxFz5pf1yirmVDtCz1tO5FbV8QcpXenUpKO+A0ppZZPgYzg0CqW8H8Xhru9P0QpiFcNCwfMAAAAASUVORK5CYII=";const T=e=>((0,a.dD)("data-v-9c9c0796"),e=e(),(0,a.Cn)(),e),G={class:"settings-item__wrapper"},R={class:"settings-item"},L={class:"city-name"},Q=T((()=>(0,a._)("span",{class:"burger"},null,-1)));function X(e,t,i,n,s,o){return(0,a.wg)(),(0,a.iD)("li",G,[(0,a._)("div",R,[(0,a._)("p",L,(0,A.zw)(e.model.name)+","+(0,A.zw)(e.model.country),1),Q,(0,a._)("img",{class:"settings-item__image",onClick:t[0]||(t[0]=(...t)=>e.removeCity&&e.removeCity(...t)),src:_,alt:""})])])}var H=(0,a.aZ)({props:{model:{type:Object}},methods:{removeCity(){this.$emit("delete",this.model)}}});const $=(0,N.Z)(H,[["render",X],["__scopeId","data-v-9c9c0796"]]);var ee=$,te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAAAXNSR0IArs4c6QAAAK9JREFUOE/N0rEKgVEYxvGfgVIGkskNGFyCLCaD4hJkdjMGg8FqknIBSnIrJpkYTHRK0uf4kMW7nOF5zv+8T+fJSJ88+hi/8d3lTIqxiwWmGPwKXKN5g1wisCNq2CW12IZZnBDOd/N0Py3yCEOs0EqQN2igjMOjlgYMviJmaCeAS3RQwf4b4KvI/wMMkeqRNecooXD7wI96GExn5F7kDpWpflKbR08ody8C3GISe+gKFy4ZDBOFZYIAAAAASUVORK5CYII=";const ie=e=>((0,a.dD)("data-v-6fb2abe9"),e=e(),(0,a.Cn)(),e),ne=ie((()=>(0,a._)("img",{class:"settings-input-img",src:te,alt:"Иконка отправки сабмита"},null,-1))),ae=[ne];function se(e,t,i,s,o,l){return(0,a.wg)(),(0,a.iD)("form",{class:"settings-input-wrapper",onSubmit:t[4]||(t[4]=(0,n.iM)((()=>{}),["prevent"]))},[(0,a.wy)((0,a._)("input",{onDrop:t[0]||(t[0]=(0,n.iM)((()=>{}),["prevent"])),autocorrect:"off",spellcheck:"false",onKeydown:t[1]||(t[1]=(0,n.D2)(((...t)=>e.setModelValue&&e.setModelValue(...t)),["enter"])),"onUpdate:modelValue":t[2]||(t[2]=t=>e.inputValue=t),class:"settings-input",placeholder:"Enter city name",type:"text"},null,544),[[n.nr,e.inputValue]]),(0,a._)("button",{class:"settings-button",onClick:t[3]||(t[3]=(...t)=>e.setModelValue&&e.setModelValue(...t))},ae)],32)}var oe=(0,a.aZ)({data(){return{inputValue:""}},methods:{setModelValue(){this.$emit("update",this.inputValue),this.inputValue=""}}});const le=(0,N.Z)(oe,[["render",se],["__scopeId","data-v-6fb2abe9"]]);var re=le,ce=(0,a.aZ)({data(){return{dragging:-1}},props:{model:{type:Array},cityNameValidation:{type:Boolean},reqValidation:{type:Boolean},loading:{type:Boolean}},components:{SettingsItem:ee,SettingsInput:re},methods:{deleteCity(e){this.$emit("delete",e)},updateModelValue(e){this.$emit("update",e)},dragStart(e,t){t.dataTransfer.setData("Text",t.target.id),t.dataTransfer.dropEffect="move",this.dragging=e},dragFinish(e){this.$emit("move",e,this.dragging)}}});const de=(0,N.Z)(ce,[["render",x],["__scopeId","data-v-08775238"]]);var ue=de,ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAA4tJREFUSEut11mormMUB/DfMWW8OGZKKDMhGSNDmS7MZQilzIQLLoQoJeKCKBkORYhQhpQxYxlCQuYxLoylZOyY+n+t9/Tsx/tte+esq2+/z3rW9PzXf629wPzlHhzdXbsMF8/H1IL5KGM1/Ijv8U3d3RCrYln8NVd783W8D57GnnihnJyKm7A+vuocx/7fY8FMc/xcGf8WG+OXunwLTqrMf6pvOf8U5+Ka+rYGPq9KvIjde+djjl/BznVxo7qwCCdj0G/vpcR/NIbvw5H193vYEq+WzSVqveOXsCuewn7YFO9iOfyGs3B75yjGcn48rsfKpZugg4PHcABmZD4W+ZvYvskgOjvg9TkCJxkm01bewVYtAPuMF1f0qzTvOkd/U9XWxHf4taoxUewdb1HRRnHtWTxuhr3r/Fl8OItuQJhE1m1a8F+Oc/9J7ItN8Eln8JRqnT7gtMzpuLnTT4Af4EEc3p6NoTpGAqSVOiMP4ZAC1nm4t86D4KvriR7Bwd29IeMZvtr2WAdH4VqEFNJCg6SV8vdb2G5KWd8oUJ7WZX4c7sSVuKOeZXEcX4pLOmMrIEAbJFT4J5b/D6TlTvp6mUav7/McLRooLcx0ER6td20JIW/9UcdM0/yfjeuweQe4+Am6w2C3YvXBcfoufTYmochQ5RgX9/p5rq/Rl7vVmzzJ0naclsmgmLPj9O1BeLsavY1wKHWQHPTOJucUOMdKvVZT6oXJOG0xkPpgNCBq3/n/gCs83gI1Pm4Y2ikDfpci+hNqEgUEg5xYoEhFtp2Scjg+Z30rxt5tyJZydwF10k69JLvfRwjkARxWlTi/jOTuMbiqCORhHNoZTMes2LXYKGUOs3cnvNYZSeZB+BhlJtOctTJwf55zxp7WGwhNJsJknbcZXVuKx/cqD9lWPp4FcT/XVMrQCYgn0jtOD6YXt0Fm6NKQYSwmgCyFo46T4RfI5tjKBvhyjlGkvO93uiGofA+VTqrYZ/xMzdnHcWCBIovcetXfZ+CuKavPsWmTKmueK6tPSvtErVHPY3ieUXANe1eAtWNFnkD2bwJdEnl9G/bpZHP/yLL3MnZrqzBtvc3OvEdltnVD+JfjgsJBVt9IGCm/r8CFzbfPavOYkem0N26DyjjLKGwloAuJHIH0dSS9nd9jgJz3Qj8NR5nTIZcfGrAFeAvRz/BZsTjff2Fi7MaaPq3hgOrMOaJ+ovYP/T7QS0u2Ag0AAAAASUVORK5CYII=",pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAAAXNSR0IArs4c6QAAAjtJREFUSEul1U+ITWEYx/HPuYOZQpHSLCyE/ImyESkr2VA2KFKirISSMvfcQlPonutPFig7fxZE+bNCyUIsWFCISFayEMnfGjJenXHOdObMnWGud/e8z/P7vu/zPs9zTqSFVWND4Cy+BV5UuNFOvZuvUQs8MT8wuqB9m9CZ2iMGxizFreJFIibXedcq8D0mFYAXEtbl9ohu2MWUCq8LsJDQhtASsMb9wMKCeFOdM6X0/60s3Yzp4Xsh+lPChLJ6QMo1Nrdzqptf5cAaxwNb8/1eZh7i5ZDAKksi7uBnG1MP8KYYHP85JL/AvYTFzXLrC9hO+1h6SgGrEq6kezV2BI7m/m90HBuYfr+0D1jlSMTOJieeTNgS04tK6g8cbPRJmq/+N9zF9DYeYWwpNC1Ee7bXmzBquDIO6sMqRyN2NBMF1ja4OCJg9mazA0/zNAuA9QnnRwxMBd2M6+FLk7bYX2fPX9+wHBBzGhuHSP1yg9VDtk3ZUW6jwMdo8FQ8Tpg/7KTkzpibWJbbHYz+zqLA3RLgXQedxckaVOUakwLpJypflxLWZMVKffcwI3dGfKgXPmeDgDHPMStr4mZvFcU8wdzCoU8T5qX2AGAXcyo8y2AfG0wcqprlcYw4UWfbAGDMBxkkMKHBp+F6LmutdLqmZbeb3A+ssjziWgZYl3BhOFjRV2VlxNXA7X5g4U92PWHFv8JK4L19wBr7ArsjXtULFWwFGnUxvsJnPEhY0AqkqElb4GHgcINz/wtL9b8B4p+N1P4UCQMAAAAASUVORK5CYII=";const me={class:"wrapper-btns"};function he(e,t,i,n,s,o){return(0,a.wg)(),(0,a.iD)("div",me,[e.viewStatus?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("img",{key:0,onClick:t[0]||(t[0]=(...t)=>e.setSettingsVisible&&e.setSettingsVisible(...t)),class:"widget-btns settings-btn",src:ge,alt:""})),e.viewStatus?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("img",{key:1,onClick:t[1]||(t[1]=(...t)=>e.widgetDisplay&&e.widgetDisplay(...t)),class:"widget-btns close-btn",src:pe,alt:""})),e.viewStatus?((0,a.wg)(),(0,a.iD)("img",{key:2,onClick:t[2]||(t[2]=(...t)=>e.setSettingsVisible&&e.setSettingsVisible(...t)),class:"widget-btns close-btn",src:pe,alt:""})):(0,a.kq)("",!0)])}var we=(0,a.aZ)({props:{viewStatus:{type:Boolean}},methods:{setSettingsVisible(){this.$emit("update")},widgetDisplay(){this.$emit("display")}}});const ve=(0,N.Z)(we,[["render",he],["__scopeId","data-v-6bfa4b5c"]]);var Ae=ve,ye=i(433),fe=i(262);const be=(e,t)=>{const i={name:e.name,temp:Math.round(e.main.temp),wind:`Wind speed: ${e.wind.speed}м/с`,humidity:`Relative humidity: ${e.main.humidity}%`,feels:`Feels like: ${Math.round(e.main.feels_like)}`,country:e.sys.country,weather:e.weather.pop(),visibility:`Visibility: ${e.visibility}м`,id:Date.now()};return t.value.push(i),t},Ie="b6c6c4d3c9695334de38329d85134e61",Ve="metric",De="https://api.openweathermap.org/data/2.5/weather";function Se(){const e=(0,fe.iH)([]),t=(0,fe.iH)(!0),i=(0,fe.iH)([]),n=(0,fe.iH)(!1),s=async(a="Moscow")=>{try{t.value=!0;const{data:{weather:i,name:s,wind:o,main:l,sys:r,visibility:c}}=await ye.Z.get(`${De}?q=${a}&appid=${Ie}&units=${Ve}`),d={weather:i,name:s,wind:o,main:l,sys:r,visibility:c};return be(d,e),n.value=!1,t.value=!1,s}catch(s){n.value=!0,i.value=i.value.filter((e=>e!==a)),localStorage.setItem("locations",JSON.stringify(i.value)),t.value=!1}},o=async()=>{localStorage.getItem("locations")&&(i.value=JSON.parse(localStorage.getItem("locations"))),i.value.length?i.value.forEach((e=>s(e))):"geolocation"in navigator?navigator.geolocation.getCurrentPosition((async a=>{const{latitude:s}=a.coords,{longitude:o}=a.coords;try{t.value=!0;const{data:{weather:a,name:l,wind:r,main:c,sys:d,visibility:u}}=await ye.Z.get(`${De}?lat=${s}&lon=${o}&appid=${Ie}&units=${Ve}`),g={weather:a,name:l,wind:r,main:c,sys:d,visibility:u};be(g,e),n.value=!1,i.value.push(l),localStorage.setItem("locations",JSON.stringify(i.value)),t.value=!1}catch(l){n.value=!0}}),(e=>{e.code===e.PERMISSION_DENIED&&s()})):await s()};return(0,a.bv)(o),{myWeather:e,isLoading:t,fetchWeather:s,locations:i,reqIsNotValid:n}}var Oe=(0,a.aZ)({name:"App",data(){return{settingIsVisible:!1,widgetIsVisible:!1,uniquenessValidation:!0}},components:{WeatherWindow:F,SettingsWindow:ue,MainBtns:Ae},methods:{setSettingsVisible(){this.settingIsVisible=!this.settingIsVisible},widgetDisplay(){this.widgetIsVisible=!this.widgetIsVisible},deleteCity(e){this.myWeather=this.myWeather.filter((t=>t.id!==e.id)),this.locations=this.locations.filter((t=>{const{name:i}=e;return i.replace(/'/g,""),t!==i})),localStorage.setItem("locations",JSON.stringify(this.locations))},async updateWeatherValue(e){if(!e)return;const t=!!this.locations.find((t=>t===e));if(this.uniquenessValidation=!t,this.uniquenessValidation){const t=await this.fetchWeather(e);this.locations.push(t.trim()),localStorage.setItem("locations",JSON.stringify(this.locations))}},moveItem(e,t){this.myWeather.splice(e,0,this.myWeather.splice(t,1)[0]);let i=this.locations[t];this.locations[t]=this.locations[e],this.locations[e]=i,localStorage.setItem("locations",JSON.stringify(this.locations))}},setup(){const{myWeather:e,isLoading:t,fetchWeather:i,locations:n,reqIsNotValid:a}=Se();return{myWeather:e,isLoading:t,fetchWeather:i,locations:n,reqIsNotValid:a}}});const Ce=(0,N.Z)(Oe,[["render",m]]);var ke=Ce;(0,n.ri)(ke).mount("#app")}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,s){if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],s=e[d][2];for(var l=!0,r=0;r<n.length;r++)(!1&s||o>=s)&&Object.keys(i.O).every((function(e){return i.O[e](n[r])}))?n.splice(r--,1):(l=!1,s<o&&(o=s));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,a,s]}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p=""}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,s,o=n[0],l=n[1],r=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(r)var d=r(i)}for(t&&t(n);c<o.length;c++)s=o[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},n=self["webpackChunkweather_widget_v3"]=self["webpackChunkweather_widget_v3"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(372)}));n=i.O(n)})();
//# sourceMappingURL=app.9df57dd8.js.map